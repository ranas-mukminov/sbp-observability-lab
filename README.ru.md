# SBP Observability Lab üîç

![License](https://img.shields.io/badge/license-Apache--2.0-blue.svg)
![Python](https://img.shields.io/badge/python-3.11%2B-blue.svg)
![CI](https://img.shields.io/badge/build-passing-brightgreen.svg)

üá∑üá∫ –†—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è | üá¨üáß [English version](README.md)

**–ê–≤—Ç–æ—Ä**: [Ranas Mukminov](https://github.com/ranas-mukminov) | **–°–∞–π—Ç**: [run-as-daemon.ru](https://run-as-daemon.ru)

---

## –û–ø–∏—Å–∞–Ω–∏–µ

SBP Observability Lab ‚Äî —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è Linux-—Å–µ—Ä–≤–µ—Ä–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ –°–∏—Å—Ç–µ–º—ã –ë—ã—Å—Ç—Ä—ã—Ö –ü–ª–∞—Ç–µ–∂–µ–π (–°–ë–ü). –í–∫–ª—é—á–∞–µ—Ç –ø–∞—Ä—Å–µ—Ä—ã –ª–æ–≥–æ–≤, –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π HTTP-–ø—Ä–æ–∫—Å–∏, —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä –º–µ—Ç—Ä–∏–∫ –¥–ª—è Prometheus, –¥–∞—à–±–æ—Ä–¥—ã Grafana –∏ AI-–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã. –ü–æ–º–æ–≥–∞–µ—Ç DevOps-–∏–Ω–∂–µ–Ω–µ—Ä–∞–º –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–∞–º –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏, —á–∞—Å—Ç–æ—Ç—É –æ—à–∏–±–æ–∫ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —à–ª—é–∑–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ–±–µ–ª –≤ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å –°–ë–ü: –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ–≤—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å —Å–±–æ–∏ –ø–ª–∞—Ç–µ–∂–µ–π, –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ—à–∏–±–æ–∫ –ø–æ –±–∞–Ω–∫–∞–º –∏ –∫–∞–Ω–∞–ª–∞–º, —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü–∞—Ä—Å–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö**: NGINX access logs, JSON-–ª–æ–≥–∏, CSV-—ç–∫—Å–ø–æ—Ä—Ç –∏–∑ —à–ª—é–∑–æ–≤ –°–ë–ü
- **Prometheus-—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä –º–µ—Ç—Ä–∏–∫**: –ü—Ä–µ–¥–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, —á–∞—Å—Ç–æ—Ç—ã –æ—à–∏–±–æ–∫, –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ uptime —à–ª—é–∑–æ–≤
- **–î–∞—à–±–æ—Ä–¥—ã Grafana**: –ë–∏–∑–Ω–µ—Å-–ø–∞–Ω–µ–ª–∏ –∏ –ø–∞–Ω–µ–ª–∏ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –±–∞–Ω–∫–∞–º, –∫–∞–Ω–∞–ª–∞–º –∏ —Ç–∏–ø–∞–º –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤ Prometheus**: –ì–æ—Ç–æ–≤—ã–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –≤—Å–ø–ª–µ—Å–∫–∏ –æ—à–∏–±–æ–∫, –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é latency –∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —à–ª—é–∑–æ–≤
- **AI-–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ weekly-–æ—Ç—á—ë—Ç—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Markdown-–æ—Ç—á—ë—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —Å —Ä–µ–∑—é–º–µ –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- **–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π HTTP-–ø—Ä–æ–∫—Å–∏**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∂–∏–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
- **–ó–∞—â–∏—Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (PAN, –Ω–æ–º–µ—Ä–∞ —Å—á–µ—Ç–æ–≤); —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö
- **–ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**: –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π Python 3.11+, —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä –Ω–∞ pytest, CI/CD –Ω–∞ GitHub Actions

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –®–ª—é–∑ –°–ë–ü       ‚îÇ  (–í–∞—à –ø–ª–∞—Ç—ë–∂–Ω—ã–π —à–ª—é–∑/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ª–æ–π)
‚îÇ  –õ–æ–≥–∏ –∏ —Ç—Ä–∞—Ñ–∏–∫  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚ñ∂ –ü–∞—Ä—Å–µ—Ä—ã –ª–æ–≥–æ–≤ (NGINX/JSON/CSV)
         ‚îÇ        ‚îÇ
         ‚îÇ        ‚ñº
         ‚îÇ   –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è ‚îÄ‚îÄ‚ñ∂ Prometheus-—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä (:8000/metrics)
         ‚îÇ                                       ‚îÇ
         ‚îî‚îÄ‚îÄ‚ñ∂ HTTP-–ø—Ä–æ–∫—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)         ‚îÇ
                    ‚îÇ                            ‚îÇ
                    ‚ñº                            ‚ñº
              –ñ–∏–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  Prometheus ‚îÄ‚îÄ‚ñ∂ –î–∞—à–±–æ—Ä–¥—ã Grafana
                                         ‚îÇ
                                         ‚ñº
                              Alert Manager ‚îÄ‚îÄ‚ñ∂ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                                         ‚îÇ
                                         ‚ñº
                                   AI-–æ—Ç—á—ë—Ç—ã (weekly)
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- **–ü–∞—Ä—Å–µ—Ä—ã** (`sbp_observability/parsing`): –ò–∑–≤–ª–µ–∫–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏–∑ –ª–æ–≥–æ–≤
- **–≠–∫—Å–ø–æ—Ä—Ç–µ—Ä** (`sbp_observability/exporter`): –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Prometheus
- **–ü—Ä–æ–∫—Å–∏** (`sbp_observability/proxy`): –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π HTTP-–ø—Ä–æ–∫—Å–∏ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∂–∏–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
- **AI-—Å–ª–æ–π** (`sbp_observability/ai`): –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —á–µ–ª–æ–≤–µ–∫—É –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –∏–∑ –ª–æ–≥–æ–≤ –æ—à–∏–±–æ–∫
- **–†–µ—Å—É—Ä—Å—ã Grafana** (`grafana/`): –ì–æ—Ç–æ–≤—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤ Prometheus

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **Ubuntu** 20.04+ / **Debian** 11+
- **RHEL** / **Rocky Linux** / **AlmaLinux** 8+
- **–õ—é–±–æ–π Linux** —Å Python 3.11+ –∏ systemd

### –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- **CPU**: 1+ —è–¥—Ä–æ
- **RAM**: –º–∏–Ω–∏–º—É–º 512 –ú–ë (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1 –ì–ë –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
- **–î–∏—Å–∫**: 100 –ú–ë –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –ø–æ–¥ –ª–æ–≥–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **Python**: 3.11 –∏–ª–∏ –≤—ã—à–µ
- **pip**: –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**: Docker –∏ Docker Compose (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ Prometheus/Grafana)
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ**: systemd (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞–º–∏)

### –°–µ—Ç—å
- –ò—Å—Ö–æ–¥—è—â–∏–π HTTPS-–¥–æ—Å—Ç—É–ø –∫ GitHub –∏ PyPI (–¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
- –û—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç 8000 –¥–ª—è —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞ Prometheus (–∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–æ—Ä—Ç)
- –û—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç 8080 –¥–ª—è HTTP-–ø—Ä–æ–∫—Å–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–æ–∑–¥–∞–Ω–∏—è virtualenv (root –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
- Root/sudo —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ systemd-—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ firewall

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/ranas-mukminov/sbp-observability-lab.git
cd sbp-observability-lab
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
python3.11 -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install -e .
```

### 3. –†–∞—Å–ø–∞—Ä—Å–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

```bash
sbp-observability parse-logs examples/logs/sbp_gateway_nginx_sample.log --format nginx
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: JSON-–º–∞—Å—Å–∏–≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å Prometheus-—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä

```bash
sbp-observability run-exporter --port 8000
```

–≠–∫—Å–ø–æ—Ä—Ç–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000/metrics`.

### 5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Prometheus

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é scrape –≤ –≤–∞—à `prometheus.yml`:

```yaml
scrape_configs:
  - job_name: 'sbp-observability'
    static_configs:
      - targets: ['localhost:8000']
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Prometheus:

```bash
sudo systemctl restart prometheus
```

### 6. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã Grafana

1. –í–æ–π–¥–∏—Ç–µ –≤ Grafana (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://localhost:3000`, admin/admin)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Dashboards ‚Üí Import**
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ JSON-—Ñ–∞–π–ª—ã –∏–∑ `grafana/dashboards/`:
   - `sbp_business.json` ‚Äî –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ (–ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π, —Ç—Ä–µ–Ω–¥—ã –æ—à–∏–±–æ–∫)
   - `sbp_tech_ops.json` ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã latency, –∑–¥–æ—Ä–æ–≤—å–µ —à–ª—é–∑–∞)

### 7. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–ª–µ—Ä—Ç—ã Prometheus (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `grafana/alerts/sbp_alert_rules.yml` –≤ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–∞–≤–∏–ª Prometheus:

```bash
sudo cp grafana/alerts/sbp_alert_rules.yml /etc/prometheus/rules/
sudo systemctl reload prometheus
```

---

## –ü–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Ubuntu / Debian

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –ø–∞–∫–µ—Ç–æ–≤
sudo apt update

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.11 (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
sudo apt install -y python3.11 python3.11-venv python3-pip git

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/ranas-mukminov/sbp-observability-lab.git
cd sbp-observability-lab

# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.11 -m venv .venv
source .venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç
pip install --upgrade pip
pip install -e .

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
sbp-observability --help
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ RHEL / Rocky / AlmaLinux

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.11 –∏–∑ AppStream
sudo dnf install -y python3.11 python3.11-pip git

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Ubuntu)
git clone https://github.com/ranas-mukminov/sbp-observability-lab.git
cd sbp-observability-lab
python3.11 -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install -e .
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å Docker Compose (–ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫)

–°–æ–∑–¥–∞–π—Ç–µ `docker-compose.yml`:

```yaml
version: '3.8'
services:
  sbp-exporter:
    build: .
    command: sbp-observability run-exporter --host 0.0.0.0 --port 8000
    ports:
      - "8000:8000"
    volumes:
      - ./examples/logs:/logs:ro
    restart: unless-stopped

  prometheus:
    image: prom/prometheus:latest
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml:ro
      - prometheus-data:/prometheus
    ports:
      - "9090:9090"
    restart: unless-stopped

  grafana:
    image: grafana/grafana:latest
    volumes:
      - grafana-data:/var/lib/grafana
      - ./grafana/dashboards:/etc/grafana/provisioning/dashboards:ro
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin
    restart: unless-stopped

volumes:
  prometheus-data:
  grafana-data:
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ç–µ–∫:

```bash
docker-compose up -d
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd-—Å–µ—Ä–≤–∏—Å–∞ (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)

–°–æ–∑–¥–∞–π—Ç–µ `/etc/systemd/system/sbp-observability.service`:

```ini
[Unit]
Description=SBP Observability Prometheus Exporter
After=network.target

[Service]
Type=simple
User=sbp-monitor
WorkingDirectory=/opt/sbp-observability-lab
Environment="PATH=/opt/sbp-observability-lab/.venv/bin"
ExecStart=/opt/sbp-observability-lab/.venv/bin/sbp-observability run-exporter --host 0.0.0.0 --port 8000
Restart=on-failure
RestartSec=10s

[Install]
WantedBy=multi-user.target
```

–í–∫–ª—é—á–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:

```bash
sudo useradd -r -s /bin/false sbp-monitor
sudo cp -r sbp-observability-lab /opt/
sudo chown -R sbp-monitor:sbp-monitor /opt/sbp-observability-lab
sudo systemctl daemon-reload
sudo systemctl enable sbp-observability.service
sudo systemctl start sbp-observability.service
sudo systemctl status sbp-observability.service
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ `/etc/sbp_observability/config.yaml`:

```yaml
# URL upstream-—Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è HTTP-–ø—Ä–æ–∫—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
upstream_url: "https://sbp-gateway.example.com"

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞ –¥–ª—è CSV-–ª–æ–≥–æ–≤
parser:
  column_mapping:
    timestamp: ts
    bank_id: bank_alias
    channel: channel_name
    operation_type: op_type
    status: result_code
    latency_ms: duration_ms

  # –ü–æ–ª—è –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ª–æ–≥–∞—Ö (–∑–∞—â–∏—Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏)
  mask_keys:
    - pan
    - card
    - account
    - phone
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- `SBP_CONFIG_PATH`: –ü—É—Ç—å –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/etc/sbp_observability/config.yaml`)
- `SBP_EXPORTER_PORT`: –ü–æ—Ä—Ç Prometheus-—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `8000`)
- `SBP_PROXY_PORT`: –ü–æ—Ä—Ç HTTP-–ø—Ä–æ–∫—Å–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `8080`)

–ü—Ä–∏–º–µ—Ä:

```bash
export SBP_CONFIG_PATH=/opt/sbp-observability/my-config.yaml
export SBP_EXPORTER_PORT=9100
sbp-observability run-exporter
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞ Prometheus

–ü—Ä–∏–º–µ—Ä —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ `prometheus.yml`:

```yaml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'sbp-observability'
    static_configs:
      - targets: ['localhost:8000']
    relabel_configs:
      - source_labels: [__address__]
        target_label: instance
        replacement: 'sbp-prod-gateway'
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ —Ç–∏–ø–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

### –ü–∞—Ä—Å–∏–Ω–≥ –ª–æ–≥–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

**NGINX access logs**:

```bash
sbp-observability parse-logs /var/log/nginx/sbp-access.log --format nginx
```

**JSON-–ª–æ–≥–∏**:

```bash
sbp-observability parse-logs /var/log/sbp-gateway/events.json --format json
```

**CSV-–ª–æ–≥–∏**:

```bash
sbp-observability parse-logs /var/log/sbp-gateway/export.csv --format csv --config-path /etc/sbp_observability/config.yaml
```

### –ó–∞–ø—É—Å–∫ Prometheus-—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞

```bash
# –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: —Å–ª—É—à–∞—Ç—å –Ω–∞ 0.0.0.0:8000
sbp-observability run-exporter

# –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ö–æ—Å—Ç –∏ –ø–æ—Ä—Ç
sbp-observability run-exporter --host 127.0.0.1 --port 9100
```

–ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏:

```bash
curl http://localhost:8000/metrics
```

### –ó–∞–ø—É—Å–∫ HTTP-–ø—Ä–æ–∫—Å–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–∫—Å–∏ –Ω–∞ –ø–æ—Ä—Ç—É 8080
sbp-observability run-proxy --port 8080
```

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∞—à —à–ª—é–∑ –°–ë–ü –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ `http://localhost:8080`.

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è weekly-–æ—Ç—á—ë—Ç–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –∫–æ–¥–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ—à–∏–±–æ–∫:

```bash
cat > errors.txt <<EOF
GATEWAY_TIMEOUT
BANK_DECLINE
RATE_LIMIT_EXCEEDED
EOF

sbp-observability generate-weekly-report errors.txt > weekly_report.md
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```markdown
## –ò—Ç–æ–≥–∏ –Ω–µ–¥–µ–ª–∏ –ø–æ –°–ë–ü

### –¢–æ–ø –ø—Ä–æ–±–ª–µ–º
- GATEWAY_TIMEOUT: 3
- BANK_DECLINE: 2

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–µ–≥–æ —à–ª—é–∑–∞
- –£—Ç–æ—á–Ω–∏—Ç—å –ª–∏–º–∏—Ç—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –∞–Ω—Ç–∏—Ñ—Ä–æ–¥–∞ –≤ –±–∞–Ω–∫–∞—Ö
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞—à–±–æ—Ä–¥–æ–≤ Grafana

1. –û—Ç–∫—Ä–æ–π—Ç–µ Grafana: `http://<IP_–í–ê–®–ï–ì–û_–°–ï–†–í–ï–†–ê>:3000`
2. –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `admin` / `admin` (—Å–º–µ–Ω–∏—Ç–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Dashboards ‚Üí Browse**
4. –í—ã–±–µ—Ä–∏—Ç–µ:
   - **SBP Business Metrics** ‚Äî –¥–ª—è –±–∏–∑–Ω–µ—Å-–∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã—Ö –ª–∏—Ü
   - **SBP Tech Ops** ‚Äî –¥–ª—è DevOps –∏ –¥–µ–∂—É—Ä–Ω—ã—Ö –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤

---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
cd sbp-observability-lab
source .venv/bin/activate
git pull origin main
pip install --upgrade -e .
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ systemd-—Å–µ—Ä–≤–∏—Å:

```bash
sudo systemctl restart sbp-observability.service
```

–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Docker Compose:

```bash
docker-compose pull
docker-compose up -d --force-recreate
```

### –ó–∞–º–µ—á–∞–Ω–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

- **v0.1.0 ‚Üí v0.2.0**: –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è
- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `CHANGELOG.md` –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∑–∞–º–µ—á–∞–Ω–∏–π –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é

---

## –õ–æ–≥–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**Systemd-—Å–µ—Ä–≤–∏—Å**:

```bash
sudo journalctl -u sbp-observability.service -f
```

**Docker Compose**:

```bash
docker-compose logs -f sbp-exporter
```

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. –°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º**: `systemctl status sbp-observability` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `failed`.

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
sudo journalctl -u sbp-observability.service -n 50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å –∫ Python –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
sudo -u sbp-monitor /opt/sbp-observability-lab/.venv/bin/sbp-observability --help
```

#### 2. –ü–æ—Ä—Ç —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º**: –û—à–∏–±–∫–∞ `Address already in use` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞.

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–æ—Ä—Ç 8000
sudo lsof -i :8000

# –ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
sbp-observability run-exporter --port 8001
```

#### 3. –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –¥–∞—à–±–æ—Ä–¥–∞—Ö Grafana

**–°–∏–º–ø—Ç–æ–º**: –ü–∞–Ω–µ–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "No data".

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Prometheus —Å–∫—Ä–µ–π–ø–∏—Ç —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä
curl http://localhost:8000/metrics

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞—Ä–≥–µ—Ç—ã Prometheus
curl http://localhost:9090/targets

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–µ–Ω–∞ –º–µ—Ç—Ä–∏–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∑–∞–ø—Ä–æ—Å–æ–≤ Prometheus
# –û–∂–∏–¥–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏: sbp_requests_total, sbp_request_latency_seconds –∏ —Ç.–¥.
```

#### 4. –û—Ç–∫–∞–∑–∞–Ω–æ –≤ –¥–æ—Å—Ç—É–ø–µ –∫ —Ñ–∞–π–ª–∞–º –ª–æ–≥–æ–≤

**–°–∏–º–ø—Ç–æ–º**: –ü–∞—Ä—Å–µ—Ä –ø–∞–¥–∞–µ—Ç —Å `PermissionError`.

**–†–µ—à–µ–Ω–∏–µ**:

```bash
# –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è sbp-monitor –≤ –≥—Ä—É–ø–ø—É –ª–æ–≥–æ–≤
sudo usermod -a -G adm sbp-monitor

# –ò–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –≤ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –º–µ—Å—Ç–æ
sudo cp /var/log/nginx/sbp-access.log /tmp/ && sudo chown sbp-monitor /tmp/sbp-access.log
```

---

## –ó–∞–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç—ë–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏.
- **–ú–∞—Å–∫–∏—Ä—É–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `mask_keys` –≤ `config.yaml` –¥–ª—è –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏–∏ PAN, –Ω–æ–º–µ—Ä–æ–≤ —Å—á–µ—Ç–æ–≤ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤.
- **–ù–∏–∫–∞–∫–∏—Ö –ü–î–Ω –≤ –º–µ—Ç—Ä–∏–∫–∞—Ö**: –ú–µ—Ç—Ä–∏–∫–∏ Prometheus –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º

- **–°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Grafana, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–º–µ–Ω–∏—Ç–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ `admin/admin`.
- **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø–æ—Ä—Ç —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ firewall, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø Prometheus —Ç–æ–ª—å–∫–æ —Å –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö IP:

```bash
sudo ufw allow from <IP_PROMETHEUS> to any port 8000
sudo ufw deny 8000
```

- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS**: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ Grafana –∏ Prometheus –∑–∞ reverse-–ø—Ä–æ–∫—Å–∏ (nginx, Caddy) —Å TLS.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ–º:

```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å dev-–æ–∫—Ä—É–∂–µ–Ω–∏–µ
pip install -e .[dev]

# –ó–∞–ø—É—Å—Ç–∏—Ç—å bandit (–ª–∏–Ω—Ç–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Python)
./scripts/security_scan.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å pip-audit (—Å–∫–∞–Ω–µ—Ä —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
pip-audit
```

### –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ

- –≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è** –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ø—Ä–æ–¥—É–∫—Ç–æ–º –ë–∞–Ω–∫–∞ –†–æ—Å—Å–∏–∏, –ù–°–ü–ö –∏–ª–∏ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–∞–Ω–∫–∞.
- –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ **–Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç** –≤–∞—Å –æ—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏—è –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 152-–§–ó –æ –∑–∞—â–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).
- –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å `LEGAL.md` –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∏—Å–∫–ª–µ–π–º–µ—Ä–æ–≤.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
sbp-observability-lab/
‚îú‚îÄ‚îÄ sbp_observability/         # –û—Å–Ω–æ–≤–Ω–æ–π Python-–ø–∞–∫–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ parsing/               # –ü–∞—Ä—Å–µ—Ä—ã –ª–æ–≥–æ–≤ (NGINX, JSON, CSV)
‚îÇ   ‚îú‚îÄ‚îÄ exporter/              # Prometheus-—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä –∏ –º–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ proxy/                 # HTTP-–ø—Ä–æ–∫—Å–∏ –¥–ª—è –∂–∏–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ ai/                    # AI-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á—ë—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ cli/                   # CLI –Ω–∞ –±–∞–∑–µ Typer
‚îÇ   ‚îú‚îÄ‚îÄ models.py              # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (TransactionEvent –∏ –¥—Ä.)
‚îÇ   ‚îî‚îÄ‚îÄ config.py              # –ó–∞–≥—Ä—É–∑—á–∏–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ grafana/                   # –†–µ—Å—É—Ä—Å—ã Grafana
‚îÇ   ‚îú‚îÄ‚îÄ dashboards/            # JSON-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ alerts/                # –ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤ Prometheus (YAML)
‚îú‚îÄ‚îÄ examples/                  # –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ logs/                  # –°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ configs/               # –ü—Ä–∏–º–µ—Ä—ã YAML-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ reports/               # –ü—Ä–∏–º–µ—Ä weekly-–æ—Ç—á—ë—Ç–∞
‚îú‚îÄ‚îÄ tests/                     # –¢–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä pytest
‚îÇ   ‚îú‚îÄ‚îÄ unit/                  # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ integration/           # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ scripts/                   # –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ CI
‚îÇ   ‚îú‚îÄ‚îÄ lint.sh                # Ruff + mypy
‚îÇ   ‚îú‚îÄ‚îÄ dev_run_all_tests.sh   # –ó–∞–ø—É—Å–∫ pytest
‚îÇ   ‚îî‚îÄ‚îÄ security_scan.sh       # Bandit + pip-audit
‚îú‚îÄ‚îÄ pyproject.toml             # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ Python-–ø–∞–∫–µ—Ç–∞
‚îú‚îÄ‚îÄ LICENSE                    # –õ–∏—Ü–µ–Ω–∑–∏—è Apache-2.0
‚îú‚îÄ‚îÄ CONTRIBUTING.md            # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∫–æ–Ω—Ç—Ä–∏–±—É—Ü–∏–∏
‚îú‚îÄ‚îÄ SECURITY.md                # –ü–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ LEGAL.md                   # –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –¥–∏—Å–∫–ª–µ–π–º–µ—Ä—ã
```

---

## –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ª–æ–≥–æ–≤ (Apache, HAProxy)
- [ ] –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–æ–º–æ—â–Ω–∏–∫–∏ —Ä–æ—Ç–∞—Ü–∏–∏ –∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
- [ ] Telegram-–±–æ—Ç –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ –∞–ª–µ—Ä—Ç–æ–≤
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ AI-–æ—Ç—á—ë—Ç—ã —Å –∞–Ω–∞–ª–∏–∑–æ–º —Ç—Ä–µ–Ω–¥–æ–≤ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [ ] Helm-—á–∞—Ä—Ç –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ Kubernetes
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenTelemetry –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞

---

## –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥! –°–º. `CONTRIBUTING.md` –¥–ª—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞.

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –§–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ feature-–≤–µ—Ç–∫–∏
2. –°–Ω–∞—á–∞–ª–∞ –ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã (TDD-–ø–æ–¥—Ö–æ–¥)
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–∏–Ω—Ç–µ—Ä—ã –∏ —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
./scripts/lint.sh
./scripts/dev_run_all_tests.sh
./scripts/security_scan.sh
```

4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ pull request —Å —á—ë—Ç–∫–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
5. –£—Å—Ç—Ä–∞–Ω–∏—Ç–µ –∑–∞–º–µ—á–∞–Ω–∏—è Codex Code Review

### –°—Ç–∏–ª—å –∫–æ–¥–∞

- **Python**: PEP 8, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è Ruff
- **–¢–∏–ø—ã**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (–≤–∫–ª—é—á—ë–Ω —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º mypy)
- **Docstrings**: –°—Ç–∏–ª—å PEP 257
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏**: 100 —Å–∏–º–≤–æ–ª–æ–≤

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ **Apache License 2.0**. –°–º. [LICENSE](LICENSE) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

---

## –ê–≤—Ç–æ—Ä –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä**: [Ranas Mukminov](https://github.com/ranas-mukminov)  
**–°–∞–π—Ç**: [run-as-daemon.ru](https://run-as-daemon.ru)

### –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–π, –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ—Å–µ—Ç–∏—Ç–µ [run-as-daemon.ru](https://run-as-daemon.ru) –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–≤—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ GitHub.

–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º:
- **–ê—É–¥–∏—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –°–ë–ü**: –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –ø–ª–∞—Ç—ë–∂–Ω–æ–≥–æ —à–ª—é–∑–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç –∏ —Ç–æ—á–µ–∫ –æ—Ç–∫–∞–∑–∞
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–µ–∫–∞ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏**: –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ Prometheus, Grafana –∏ —ç—Ç–æ–≥–æ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –Ω–∞ –≤–∞—à–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø–æ–¥ –∫–ª—é—á
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –∏ –∞–ª–µ—Ä—Ç—ã**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ –≤–∞—à–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ use case –°–ë–ü –∏ SLA-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è weekly-–æ—Ç—á—ë—Ç–æ–≤**: AI-powered –∏–Ω—Å–∞–π—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–æ–¥ –≤–∞—à–∏ –±–∏–∑–Ω–µ—Å-KPI
- **DevOps / SRE-–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥**: –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞, —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

---

## –î–∏—Å–∫–ª–µ–π–º–µ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º open-source –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –∏ **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è** –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ø—Ä–æ–¥—É–∫—Ç–æ–º –ë–∞–Ω–∫–∞ –†–æ—Å—Å–∏–∏, –ù–°–ü–ö –∏–ª–∏ –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. –û–Ω –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —É—Å–ª—É–≥ –∏ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ —Å–æ–±–ª—é–¥–µ–Ω–∏—é –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Ä–∏—Å–∫ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º –ø—Ä–∏–º–µ–Ω–∏–º—ã–º –∑–∞–∫–æ–Ω–∞–º –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º.
